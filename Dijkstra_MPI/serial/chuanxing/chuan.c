#include<stdio.h>
#include<time.h>


#define INFINITY 99999
#define MAX 100
 
void dijikstra(int G[MAX][MAX], int n, int startnode);
void read();
 
int main(){
	
	//int G[MAX][MAX], i, j, n=10, u=1;
	int i, j, n, u;
	int G[40][40]= {
				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,
	
				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,
				//***********************************:30

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41,

				41, 67, 34, 34, 69, 24, 78, 58, 62, 64,
				5, 45, 81, 27, 61, 91, 95, 42, 27, 36,
				91, 4, 2, 53, 92, 82, 21, 16, 18, 95,
				47, 26, 71, 38, 69, 12, 67, 99, 35, 94,
				3, 11, 22, 33, 73, 64, 41, 11, 53, 68,
				47, 44, 62, 57, 37, 59, 23, 41, 29, 78,
				16, 35, 90, 42, 88, 6, 40, 42, 64, 48 ,
				46, 5, 90, 29 ,70, 50, 6, 1 ,93, 48, 
				29, 23, 84, 54 ,56, 40, 66, 76 ,31, 8,
				44, 39 ,26 ,23, 37 ,38, 18, 82, 29, 41
				
				};
	clock_t start,end;
	clock_t start1,end1;
	double time1,time;
	
    printf("\nEnter the no. of vertices:: ");
    scanf("%d", &n);
    
	
	printf("\nRead the adjacency matrix::\n");
    
	//start1 = clock();
	//for(i=0;i < n;i++)
        //for(j=0;j < n;j++)
            //scanf("%d", &G[i][j]);

    //end1 = clock();
	printf("\nEnter the starting node:: ");
    scanf("%d", &u);
	
	start = clock();
    dijikstra(G,n,u);
	end = clock();
	//time1 = (double)(end1-start1)/CLOCKS_PER_SEC;
	//printf("%ld %ld %ld",end1,start1,end1-start1);
	time = (double)(end-start)/CLOCKS_PER_SEC;
	//time = time+time1;
	printf("程序运行时间为：%lf毫秒\n",time*1000);

}

 
void dijikstra(int G[MAX][MAX], int n, int startnode)
{
    int cost[MAX][MAX], distance[MAX], pred[MAX];
    int visited[MAX], count, mindistance, nextnode, i,j;
    for(i=0;i < n;i++)
        for(j=0;j < n;j++)
            if(G[i][j]==0)
                cost[i][j]=INFINITY;
            else
                cost[i][j]=G[i][j];
 
    for(i=0;i< n;i++) {
        distance[i]=cost[startnode][i];
        pred[i]=startnode;
        visited[i]=0;
    }
    distance[startnode]=0;
    visited[startnode]=1;
    count=1;
    while(count < n-1) {
        mindistance=INFINITY;
        for(i=0;i < n;i++)
            if(distance[i] < mindistance&&!visited[i]) {
                mindistance=distance[i];
                nextnode=i;
            }
        visited[nextnode]=1;
        for(i=0;i < n;i++)
            if(!visited[i])
                if(mindistance+cost[nextnode][i] < distance[i]) {
                    distance[i]=mindistance+cost[nextnode][i];
                    pred[i]=nextnode;
                }
            count++;
    }
 
    for(i=0;i < n;i++)
        if(i!=startnode) {
            printf("\nDistance of %d = %d", i, distance[i]);
            printf("\nPath = %d", i);
            j=i;
            do {
                j=pred[j];
                printf(" <-%d", j);
            }
            while(j!=startnode);
        }
    printf("\n");
}

